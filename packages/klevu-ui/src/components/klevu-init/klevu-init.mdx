import { ArgsTable, Canvas, Meta, Story, Description } from "@storybook/addon-docs"
import { html } from "lit-html"
import { MDXAutoFillMeta } from "../../storybookUtils"
import * as Stories from "./klevu-init.stories"

<Meta title="Non components/Init" component="klevu-init" argTypes={meta.argTypes} parameters={meta.parameters} />

# Klevu-init

<Description>{meta.description}</Description>

<Story
  name="Init"
  args={{
    apiKey: "klevu-165829460115715456",
    url: "https://eucs30v2.ksearchnet.com/cs/v2/search",
    settings: {
      onProductClick: (product, event) => {},
      generateProductUrl: (product) => {
        return `myurl.com/${product.id}`
      },
      renderPrice: (amount, currency) => `${amount} ${currency}`,
    },
  }}
>
  {(args) => html`<klevu-init api-key=${args.apiKey} url=${args.url} .settings=${args.settings}></klevu-init>`}
</Story>

## VanillaJS initialization

For simple initialization of Klevu components place following code in your HTML file right after `<body>` tag.

```html
<klevu-init api-key="klevu-165829460115715456" url="https://eucs30v2.ksearchnet.com/cs/v2/search"></klevu-init>
<script>
  document.querySelector("klevu-init").settings = {
    onProductClick: (product, event) => {
      // if you wish to prevent default url redirection you can use event.preventDefault() and redirect to your own url
    },
    generateProductUrl: (product) => {
      return `myurl.com/${product.id}`
    },
    renderPrice: (amount, currency) => `${amount} ${currency}`,
  }
</script>
```

## React initialization

For React initialization of Klevu components place following code in your React main file.

```jsx
import React from "react"
import { KlevuInit } from "@klevu/ui-react"
import { MyComponent } from "./my-component"

export function App() {
  return (
    <React.Fragment>
      <KlevuInit
        apiKey="klevu-165829460115715456"
        url="https://eucs30v2.ksearchnet.com/cs/v2/search"
        settings={{
          onProductClick: (product, event) => {
            // here you could use react router to do the redirection
          },
          generateProductUrl: (product) => {
            return `myurl.com/${product.id}`
          },
          renderPrice: (amount, currency) => `${amount} ${currency}`,
        }}
      />
      <MyComponent />
    </React.Fragment>
  )
}
```

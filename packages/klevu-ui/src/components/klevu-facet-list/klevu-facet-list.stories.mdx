import { FilterManager, KlevuFilterType } from "@klevu/core"
import { ArgsTable, Canvas, Meta, Story, Description, Source } from "@storybook/addon-docs"
import { html, Fragment } from "lit-html"
import { ifDefined } from "lit-html/directives/if-defined.js"
import { MDXAutoFillMeta, fullMockRequest } from "../../storybookUtils"
const meta = MDXAutoFillMeta("klevu-facet-list")
const manager = new FilterManager()
manager.initFromListFilters(fullMockRequest.queryResults?.[0].filters)
const manager2 = new FilterManager()
manager2.initFromListFilters([
  {
    key: "color",
    label: "Filtercolor",
    type: "OPTIONS",
    options: [
      { count: 26, name: "beige", value: "beige", selected: false },
      { count: 41, name: "black", value: "black", selected: false },
      { count: 243, name: "blue", value: "blue", selected: false },
      { count: 45, name: "brown", value: "brown", selected: false },
      { count: 40, name: "green", value: "green", selected: false },
      { count: 85, name: "grey", value: "grey", selected: false },
      { count: 42, name: "multicolored", value: "multicolored", selected: false },
      { count: 11, name: "oliv", value: "oliv", selected: false },
      { count: 1, name: "orange", value: "orange", selected: false },
      { count: 3, name: "petrol", value: "petrol", selected: false },
    ],
  },
  {
    key: "size",
    label: "Size",
    type: "OPTIONS",
    options: [
      { count: 14, name: "0", value: "0", selected: false },
      { count: 14, name: "1", value: "1", selected: false },
      { count: 31, name: "10", value: "10", selected: false },
    ],
  },
])

<Meta
  title="Components/Facet list"
  component="klevu-facet-list"
  argTypes={meta.argTypes}
  parameters={meta.parameters}
/>

# Klevu-facet-list

<Description>{meta.description}</Description>

<Canvas>
  <Story
    name="Facet list"
    args={{
      manager: manager,
    }}
  >
    {(args) => html`<klevu-facet-list
      accordion=${ifDefined(args.accordion)}
      .customOrder=${args.customOrder}
      .manager=${args.manager}
      .mode=${args.mode}
      use-apply-button="${ifDefined(args.useApplyButton)}}"
    ></klevu-facet-list>`}
  </Story>
</Canvas>

Typically you will want to load the data through the `FilterManager` class. This class will handle the data and the state of the filters.

```jsx
import React from "react"
import { KlevuFacet } from "@klevu/ui-react"
import { FilterManager } from "@klevu/core"

const manager = new FilterManager()

// Load the manager options with KlevuFetch or other method.

const MyComp = () => {
  return <KlevuFacetList manager={manager} />
}
```

<ArgsTable story="Facet list" />

## Example with less data

<Canvas>
  <Story
    name="Small example"
    args={{
      manager: manager2,
    }}
  >
    {(args) => html`<klevu-facet-list
      accordion=${ifDefined(args.accordion)}
      .customOrder=${args.customOrder}
      .manager=${args.manager}
      .mode=${args.mode}
      use-apply-button="${ifDefined(args.useApplyButton)}}"
    ></klevu-facet-list>`}
  </Story>
</Canvas>
